# =============================================================================
# ASH ECOSYSTEM UNIFIED CONFIGURATION
# Combined Environment Template for All Ash Components v2.1
# Repository: https://github.com/the-alphabet-cartel/ash
# Part of: The Alphabet Cartel (https://discord.gg/alphabetcartel)
# Website: https://alphabetcartel.org
# =============================================================================

# =============================================================================
# GLOBAL CORE AUTHENTICATION & SECRETS
# =============================================================================
# Claude AI Configuration
GLOBAL_CLAUDE_API_KEY=/run/secrets/claude_api_key
GLOBAL_CLAUDE_MODEL=claude-sonnet-4-20250514

# Discord Bot Authentication
BOT_DISCORD_TOKEN=/run/secrets/discord_token

# Session Management & Security
GLOBAL_SESSION_TOKEN=/run/secrets/session_token
GLOBAL_POSTGRES_PASSWORD=/run/secrets/postgres
GLOBAL_REDIS_PASSWORD=/run/secrets/redis
GLOBAL_HUGGINGFACE_TOKEN=/run/secrets/huggingface

# =============================================================================
# GLOBAL SYSTEM CONFIGURATION
# =============================================================================
# Environment Settings
GLOBAL_ENVIRONMENT=production
GLOBAL_PYTHONUNBUFFERED=1
GLOBAL_LOG_LEVEL=INFO
GLOBAL_ENABLE_DEBUG_MODE=false
GLOBAL_ENABLE_DEBUG_LOGGING=false
GLOBAL_ENABLE_LEARNING_SYSTEM=true

# Network Configuration
GLOBAL_REQUEST_TIMEOUT=30
GLOBAL_ALLOWED_IPS=10.20.30.0/24,172.20.0.0/16,127.0.0.1,::1
GLOBAL_BLOCKED_IPS=
GLOBAL_API_ENABLE_CORS=true
GLOBAL_API_ALLOWED_ORIGINS=*

# =============================================================================
# GLOBAL SERVICE ENDPOINTS & NETWORKING
# =============================================================================
# Internal Docker Network IPs (for docker-compose)
GLOBAL_BOT_API_HOST=172.20.0.10
GLOBAL_NLP_API_HOST=172.20.0.11
GLOBAL_DASH_API_HOST=172.20.0.12
GLOBAL_THRASH_API_HOST=172.20.0.13

# Service Ports
GLOBAL_BOT_API_PORT=8882
GLOBAL_NLP_API_PORT=8881
GLOBAL_DASH_API_PORT=8883
GLOBAL_THRASH_API_PORT=8884

# Service URLs (External Server Access)
GLOBAL_BOT_API_URL=http://172.20.0.10:8882
GLOBAL_NLP_API_URL=http://172.20.0.11:8881
GLOBAL_DASH_API_URL=http://172.20.0.12:8883
GLOBAL_THRASH_API_URL=http://172.20.0.13:8884

# External Server URLs (Direct IP Access)
# Use these when accessing from outside Docker network
# GLOBAL_BOT_API_URL=http://10.20.30.253:8882
# GLOBAL_NLP_API_URL=http://10.20.30.253:8881
# GLOBAL_DASH_API_URL=http://10.20.30.253:8883
# GLOBAL_THRASH_API_URL=http://10.20.30.253:8884

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================
# PostgreSQL Configuration
GLOBAL_POSTGRES_DB=ash
GLOBAL_POSTGRES_USER=ash

# Redis Configuration
GLOBAL_REDIS_HOST=ash-redis
GLOBAL_REDIS_PORT=6379

# =============================================================================
# ASH-BOT CONFIGURATION (Discord Bot)
# =============================================================================
# Discord Server Configuration
BOT_GUILD_ID=your_discord_server_id_here

# Channel Configuration
BOT_CRISIS_RESPONSE_CHANNEL_ID=your_crisis_response_channel_id_here
BOT_RESOURCES_CHANNEL_ID=your_resources_channel_id_here

# Channel Restrictions (comma-separated list - leave empty for no restrictions)
BOT_ALLOWED_CHANNELS=channel_id_1,channel_id_2,channel_id_3

# Display Names for User-Facing Messages
BOT_RESOURCES_CHANNEL_NAME=resources
BOT_CRISIS_RESPONSE_ROLE_NAME=CrisisResponse

# Bot Performance Configuration
BOT_MAX_CONCURRENT_ANALYSIS=15
BOT_MESSAGE_CACHE_SIZE=2000
BOT_ANALYSIS_TIMEOUT=25
BOT_MESSAGE_DELETE_DELAY=10
BOT_ENABLE_TYPING_INDICATOR=true
BOT_RESPONSE_DELAY_SECONDS=2
BOT_MAX_MESSAGE_LENGTH=2000

# Crisis Detection Configuration
BOT_CRISIS_DETECTION_ENABLED=true
BOT_AUTO_RESPONSE_ENABLED=true
BOT_ENABLE_LEARNING_MODE=true
BOT_CONFIDENCE_THRESHOLD=0.7
BOT_HIGH_RISK_THRESHOLD=0.85

# Logging & Monitoring
BOT_ENABLE_AUDIT_LOGGING=true
BOT_LOG_USER_INTERACTIONS=true
BOT_LOG_CRISIS_EVENTS=true
BOT_ENABLE_METRICS_COLLECTION=true

# Rate Limiting
BOT_RATE_LIMIT_MESSAGES_PER_MINUTE=10
BOT_RATE_LIMIT_ANALYSIS_PER_HOUR=100

# =============================================================================
# ASH-NLP CONFIGURATION (NLP Processing Server)
# =============================================================================
# Hugging Face Configuration
NLP_HUGGINGFACE_CACHE_DIR=./models/cache

# Model Configuration
NLP_DEPRESSION_MODEL=rafalposwiata/deproberta-large-depression
NLP_SENTIMENT_MODEL=cardiffnlp/twitter-roberta-base-sentiment-latest
NLP_MODEL_CACHE_DIR=./models/cache

# Hardware Configuration
NLP_DEVICE=auto  # auto, cpu, cuda, or specific device like cuda:0
NLP_MODEL_PRECISION=float16  # float32, float16, or bfloat16

# Performance Tuning
NLP_MAX_BATCH_SIZE=32
NLP_INFERENCE_THREADS=8
NLP_MAX_CONCURRENT_REQUESTS=12
NLP_REQUEST_TIMEOUT=30

# Server Configuration
NLP_SERVICE_HOST=0.0.0.0
NLP_SERVICE_PORT=8881
NLP_UVICORN_WORKERS=1
NLP_RELOAD_ON_CHANGES=false

# Learning System Configuration
NLP_LEARNING_RATE=0.1
NLP_MAX_LEARNING_ADJUSTMENTS_PER_DAY=50
NLP_LEARNING_PERSISTENCE_FILE=./learning_data/adjustments.json
NLP_MIN_CONFIDENCE_ADJUSTMENT=0.05
NLP_MAX_CONFIDENCE_ADJUSTMENT=0.30

# Crisis Detection Thresholds
NLP_HIGH_CRISIS_THRESHOLD=0.55
NLP_MEDIUM_CRISIS_THRESHOLD=0.28
NLP_LOW_CRISIS_THRESHOLD=0.16

# Data Directories
NLP_DATA_DIR=./data
NLP_MODELS_DIR=./models/cache
NLP_LOGS_DIR=./logs
NLP_LEARNING_DATA_DIR=./learning_data

# Health Checks
NLP_HEALTH_CHECK_INTERVAL=60
NLP_HEALTH_CHECK_START_PERIOD=300

# Rate Limiting
NLP_MAX_REQUESTS_PER_MINUTE=60
NLP_MAX_REQUESTS_PER_HOUR=1000

# =============================================================================
# ASH-DASH CONFIGURATION (Analytics Dashboard)
# =============================================================================
# SSL Configuration
DASH_ENABLE_SSL=false
DASH_SSL_CERT_PATH=/app/certs/cert.pem
DASH_SSL_KEY_PATH=/app/certs/key.pem

# API Integration Timeouts
DASH_BOT_API_TIMEOUT=5000
DASH_NLP_API_TIMEOUT=10000

# Dashboard Features & Performance
DASH_CACHE_TTL=600
DASH_ENABLE_ANALYTICS=true
DASH_ANALYTICS_RETENTION_DAYS=90

# Real-time Updates
DASH_ENABLE_SOCKET_IO=true
DASH_METRICS_UPDATE_INTERVAL=60000

# Logging Configuration
DASH_LOG_FILE=ash-dash.log
DASH_ENABLE_ACCESS_LOGS=true

# Security & Rate Limiting
DASH_ENABLE_RATE_LIMITING=true
DASH_MAX_REQUESTS_PER_MINUTE=100
DASH_API_KEY_REQUIRED=false

# Directory Structure
DASH_DATA_DIR=./data
DASH_CACHE_DIR=./cache
DASH_TEMP_DIR=./temp
DASH_LOG_DIR=./logs
DASH_BACKUP_DIR=./backups

# Monitoring & Health Checks
DASH_HEALTH_CHECK_INTERVAL=120000
DASH_SERVICE_CHECK_TIMEOUT=10000
DASH_LOG_API_RESPONSE_TIMES=true

# Display Configuration
DASH_ENABLE_SOCKET_IO=true
DASH_ENABLE_REAL_TIME_UPDATES=true
DASH_UPDATE_INTERVAL_MS=5000

# =============================================================================
# ASH-THRASH CONFIGURATION (Testing Suite)
# =============================================================================
# API Server Configuration
THRASH_API_HOST=0.0.0.0

# Security & Authentication
THRASH_API_RATE_LIMIT=100
THRASH_ENABLE_API_AUTHENTICATION=true

# Testing Configuration
THRASH_MAX_CONCURRENT_TESTS=5
THRASH_RESULTS_RETENTION_DAYS=30
THRASH_ENABLE_DETAILED_LOGGING=true

# Automated Testing Schedule
THRASH_ENABLE_SCHEDULED_TESTS=true
THRASH_COMPREHENSIVE_TEST_INTERVAL=daily
THRASH_QUICK_TEST_INTERVAL=hourly

# Alternative: Cron-style scheduling
THRASH_ENABLE_SCHEDULED_TESTING=true
THRASH_COMPREHENSIVE_TEST_SCHEDULE=0 */6 * * *    # Every 6 hours
THRASH_QUICK_VALIDATION_SCHEDULE=0 * * * *        # Every hour

# Dashboard Integration
THRASH_ENABLE_DASHBOARD_INTEGRATION=true
THRASH_DASHBOARD_UPDATE_INTERVAL=120

# Test Execution Settings
THRASH_TEST_TIMEOUT_SECONDS=10

# =============================================================================
# DEPLOYMENT NOTES
# =============================================================================
# 1. Copy this file to .env in the ash repository root
# 2. Generate secure passwords for database and session tokens:
#    - openssl rand -base64 32
#    - openssl rand -hex 32
# 3. Ensure Docker secrets are properly configured for production
# 4. Review and adjust resource limits based on your server specifications
# =============================================================================
# For more information, visit:
# - Discord: https://discord.gg/alphabetcartel
# - Website: https://alphabetcartel.org
# - Repository: https://github.com/the-alphabet-cartel/ash
# =============================================================================