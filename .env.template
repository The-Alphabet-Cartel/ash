# ======================================================= #
# Ash v5.0 Environment Variables Template
# ======================================================= #
# FILE VERSION: v5.0.15
# LAST MODIFIED: 2026-01-06
# CLEAN ARCHITECTURE: Compliant
# Repository: https://github.com/the-alphabet-cartel/ash
# Community: The Alphabet Cartel - https://discord.gg/alphabetcartel | https://alphabetcartel.org
#
# USAGE:
#   1. Copy this file to .env
#   2. Modify values as needed
#   3. Environment variables OVERRIDE JSON config defaults
#
# ⚠️  SECRETS WARNING:
#   Do NOT put API tokens or passwords in this file!
#   Use Docker Secrets instead: ./secrets/
#   See secrets/README.md for setup instructions
#
# ------------------------------------------------------- #
# VARIABLE_NAME=value                                     # Description (default: X)
# Comments regarding use of previous variable
# More comments
# ------------------------------------------------------- #
# ======================================================= #


# ======================================================= #
# GLOBAL VARIABLES
# ======================================================= #
# ------------------------------------------------------- #
# USER/GROUP ID (LinuxServer.io Style)
# ------------------------------------------------------- #
# Set these to match your host user for correct file permissions.
# Find your IDs by running 'id' on your host system.
#
# Example output: uid=1000(bubba) gid=1000(bubba) ...
#   PUID=1000
#   PGID=1000
# ------------------------------------------------------- #
PUID=1001                                                 # User ID to run container as (default: 1000)
PGID=1001                                                 # Group ID to run container as (default: 1000)
# ------------------------------------------------------- #

# ------------------------------------------------------- #
# TIMEZONE - Used by Docker and the bot
# ------------------------------------------------------- #
TZ=America/Los_Angeles                                    # Server timezone (default: UTC)
# ------------------------------------------------------- #
# ======================================================= #


# ======================================================= #
# ASH-NLP SERVER SETUP
# ======================================================= #
# ------------------------------------------------------- #
# SERVER CONFIGURATION
# ------------------------------------------------------- #
NLP_ENVIRONMENT=production                                # production, testing (default: production)
# ------------------------------------------------------- #

# ------------------------------------------------------- #
# LOGGING CONFIGURATION
# ------------------------------------------------------- #
NLP_LOG_LEVEL=INFO                                        # Log level: DEBUG, INFO, WARNING, ERROR, CRITICAL (default: INFO)
NLP_LOG_FORMAT=human                                      # Log format: json, human (default: human for dev, json for production)
NLP_LOG_FILE=/app/logs/ash-nlp.log                        # Log output file path (default: /app/logs/ash-nlp.log)
NLP_LOG_CONSOLE=true                                      # Enable console logging (default: true)
# ------------------------------------------------------- #

# ------------------------------------------------------- #
# API SERVER CONFIGURATION
# ------------------------------------------------------- #
NLP_API_HOST=0.0.0.0                                      # Host address for the API server (0.0.0.0 for all interfaces)
NLP_API_PORT=30880                                        # Port for the API server (default: 30880)
NLP_API_WORKERS=1                                         # Number of worker processes (default: 4)
NLP_API_TIMEOUT=30                                        # Request timeout in seconds (default: 30)
NLP_API_RATE_LIMIT_ENABLED=true                           # Enable/disable rate limiting (default: true)
NLP_API_RATE_LIMIT_RPM=60                                 # Rate limit: requests per minute per client (default: 60)
# ------------------------------------------------------- #

# ------------------------------------------------------- #
# ALERTING CONFIGURATION
# ------------------------------------------------------- #
NLP_ALERTING_ENABLED=true                                 # Enable Discord alerting (default: true)
# Note: Discord webhook URL should be in secrets/discord_alert_webhook
# See secrets/README.md for setup instructions
# ------------------------------------------------------- #

# ------------------------------------------------------- #
# PERFORMANCE CONFIGURATION
# ------------------------------------------------------- #
NLP_CACHE_ENABLED=true                                    # Enable response caching (default: true)
NLP_CACHE_TTL=300                                         # Cache TTL in seconds (default: 300 = 5 minutes)
NLP_CACHE_MAX_SIZE=1000                                   # Maximum cache entries (default: 1000)
NLP_ASYNC_INFERENCE=true                                  # Enable async parallel inference (default: true)
# ------------------------------------------------------- #
# ======================================================= #

# ======================================================= #
# MODEL CONFIGURATION
# ======================================================= #
# ------------------------------------------------------- #
# HUGGINGFACE CONFIGURATION
# ------------------------------------------------------- #
HF_HOME=/app/models-cache                                 # HuggingFace cache directory
TRANSFORMERS_OFFLINE=0                                    # Offline mode (use cached models only)
# ------------------------------------------------------- #

# ------------------------------------------------------- #
# MODEL CONFIGURATION
# ------------------------------------------------------- #
NLP_MODEL_DEVICE=auto                                     # Device for model inference: cuda, cpu, auto (default: auto)
NLP_MODEL_CACHE_DIR=/app/models-cache                     # Model cache directory (default: ./models-cache)
NLP_MODEL_WARMUP_ENABLED=true                             # Enable model warmup on startup (default: true)
NLP_MODEL_MAX_CONCURRENT=4                                # Maximum concurrent model inferences (default: 4)
# ------------------------------------------------------- #

# ------------------------------------------------------- #
# BART CRISIS CLASSIFIER (Primary Model)
# ------------------------------------------------------- #
NLP_MODEL_BART_ID=facebook/bart-large-mnli                # HuggingFace model ID for BART
NLP_MODEL_BART_WEIGHT=0.50                                # Weight in ensemble scoring (default: 0.50)
NLP_MODEL_BART_ENABLED=true                               # Enable/disable this model (default: true)
# ------------------------------------------------------- #

# ------------------------------------------------------- #
# CARDIFF SENTIMENT ANALYZER (Secondary Model)
# ------------------------------------------------------- #
NLP_MODEL_SENTIMENT_ID=cardiffnlp/twitter-roberta-base-sentiment-latest  # HuggingFace model ID for sentiment
NLP_MODEL_SENTIMENT_WEIGHT=0.25                           # Weight in ensemble scoring (default: 0.25)
NLP_MODEL_SENTIMENT_ENABLED=true                          # Enable/disable this model (default: true)
# ------------------------------------------------------- #

# ------------------------------------------------------- #
# CARDIFF IRONY DETECTOR (Tertiary Model)
# ------------------------------------------------------- #
NLP_MODEL_IRONY_ID=cardiffnlp/twitter-roberta-base-irony  # HuggingFace model ID for irony detection
NLP_MODEL_IRONY_WEIGHT=0.15                               # Weight in ensemble scoring (default: 0.15)
NLP_MODEL_IRONY_ENABLED=true                              # Enable/disable this model (default: true)
# ------------------------------------------------------- #

# ------------------------------------------------------- #
# ROBERTA EMOTIONS CLASSIFIER (Supplementary Model)
# ------------------------------------------------------- #
NLP_MODEL_EMOTIONS_ID=SamLowe/roberta-base-go_emotions    # HuggingFace model ID for emotions
NLP_MODEL_EMOTIONS_WEIGHT=0.10                            # Weight in ensemble scoring (default: 0.10)
NLP_MODEL_EMOTIONS_ENABLED=true                           # Enable/disable this model (default: true)
# ------------------------------------------------------- #
# ======================================================= #

# ======================================================= #
# THRESHOLDS CONFIGURATION
# ======================================================= #
# ------------------------------------------------------- #
# CRISIS SEVERITY THRESHOLDS
# ------------------------------------------------------- #
NLP_THRESHOLD_CRITICAL=0.85                               # Threshold for CRITICAL severity (default: 0.85)
NLP_THRESHOLD_HIGH=0.70                                   # Threshold for HIGH severity (default: 0.70)
NLP_THRESHOLD_MEDIUM=0.50                                 # Threshold for MEDIUM severity (default: 0.50)
NLP_THRESHOLD_LOW=0.30                                    # Threshold for LOW severity (default: 0.30)
# ------------------------------------------------------- #

# ------------------------------------------------------- #
# CONSENSUS CONFIGURATION
# ------------------------------------------------------- #
NLP_CONSENSUS_ALGORITHM=weighted_voting                   # Default consensus algorithm: weighted_voting, majority_voting, unanimous, conflict_aware
NLP_CONSENSUS_CRISIS_THRESHOLD=0.5                        # Crisis threshold for consensus algorithms (default: 0.5)
NLP_CONSENSUS_MAJORITY_THRESHOLD=0.5                      # Majority voting: fraction of votes needed for crisis (default: 0.5)
NLP_CONSENSUS_UNANIMOUS_THRESHOLD=0.6                     # Unanimous: threshold for crisis agreement (default: 0.6)
NLP_CONSENSUS_DISAGREEMENT_THRESHOLD=0.15                 # Conflict-aware: variance threshold for disagreement detection (default: 0.15)
# ------------------------------------------------------- #

# ------------------------------------------------------- #
# CONFLICT DETECTION CONFIGURATION
# ------------------------------------------------------- #
NLP_CONFLICT_DETECTION_ENABLED=true                       # Enable conflict detection (default: true)
NLP_CONFLICT_SCORE_THRESHOLD=0.4                          # Score disagreement threshold (max-min > threshold = conflict) (default: 0.4)
# ------------------------------------------------------- #

# ------------------------------------------------------- #
# CONFLICT RESOLUTION CONFIGURATION
# ------------------------------------------------------- #
NLP_CONFLICT_RESOLUTION_STRATEGY=conservative             # Default resolution strategy: conservative, optimistic, mean, review_flag
# ------------------------------------------------------- #

# ------------------------------------------------------- #
# CONFLICT ALERTING CONFIGURATION
# ------------------------------------------------------- #
NLP_CONFLICT_ALERT_ENABLED=true                           # Enable Discord alerts for model conflicts (default: true)
NLP_CONFLICT_ALERT_HIGH_SEVERITY=true                     # Alert on high severity conflicts (default: true)
NLP_CONFLICT_ALERT_REVIEW_FLAG=true                       # Alert when review flag is set (default: true)
NLP_CONFLICT_ALERT_COOLDOWN=60                            # Cooldown between alerts in seconds (default: 60)
# ------------------------------------------------------- #

# ------------------------------------------------------- #
# EXPLAINABILITY CONFIGURATION
# ------------------------------------------------------- #
NLP_EXPLAINABILITY_ENABLED=true                           # Enable explanation generation (default: true)
NLP_EXPLAINABILITY_VERBOSITY=standard                     # Verbosity level: minimal, standard, detailed (default: standard)
NLP_EXPLAINABILITY_MODEL_DETAILS=true                     # Include individual model details in explanation (default: true)
NLP_EXPLAINABILITY_RECOMMENDATIONS=true                   # Include recommended actions (default: true)
# ------------------------------------------------------- #

# ------------------------------------------------------- #
# CONTEXT ANALYSIS CONFIGURATION
# ------------------------------------------------------- #
NLP_CONTEXT_ANALYSIS_ENABLED=true                         # Enable context analysis features (default: true)
NLP_CONTEXT_MAX_HISTORY_SIZE=20                           # Maximum messages to analyze in history (default: 20)
# ------------------------------------------------------- #

# ------------------------------------------------------- #
# ESCALATION DETECTION CONFIGURATION
# ------------------------------------------------------- #
NLP_ESCALATION_DETECTION_ENABLED=true                     # Enable escalation detection (default: true)
NLP_ESCALATION_RAPID_THRESHOLD_HOURS=4                    # Hours threshold for "rapid" escalation classification (default: 4)
NLP_ESCALATION_GRADUAL_THRESHOLD_HOURS=24                 # Hours threshold for "gradual" escalation classification (default: 24)
NLP_ESCALATION_SCORE_THRESHOLD=0.3                        # Minimum score increase to trigger escalation detection (default: 0.3)
NLP_ESCALATION_MINIMUM_MESSAGES=3                         # Minimum messages required for escalation analysis (default: 3)
NLP_ESCALATION_ALERT_ENABLED=true                         # Enable Discord alerts on escalation detection (default: true)
NLP_ESCALATION_ALERT_COOLDOWN_SECONDS=300                 # Cooldown between escalation alerts in seconds (default: 300 = 5 minutes)
# ------------------------------------------------------- #

# ------------------------------------------------------- #
# TEMPORAL DETECTION CONFIGURATION
# ------------------------------------------------------- #
NLP_TEMPORAL_DETECTION_ENABLED=true                       # Enable temporal pattern detection (default: true)
NLP_TEMPORAL_LATE_NIGHT_START=23                          # Start hour for "late night" classification (24h format, default: 23 = 11PM)
NLP_TEMPORAL_LATE_NIGHT_END=6                             # End hour for "late night" classification (24h format, default: 6 = 6AM)
NLP_TEMPORAL_LATE_NIGHT_MODIFIER=1.2                      # Risk score modifier for late night messages (default: 1.2 = 20% boost)
NLP_TEMPORAL_RAPID_POSTING_MINUTES=30                     # Minutes threshold for "rapid posting" detection (default: 30)
NLP_TEMPORAL_RAPID_POSTING_COUNT=5                        # Message count threshold for "rapid posting" detection (default: 5)
NLP_TEMPORAL_WEEKEND_MODIFIER=1.1                         # Risk score modifier for weekend messages (default: 1.1 = 10% boost)
# ------------------------------------------------------- #

# ------------------------------------------------------- #
# TREND ANALYSIS CONFIGURATION
# ------------------------------------------------------- #
NLP_TREND_ANALYSIS_ENABLED=true                           # Enable trend analysis (default: true)
NLP_TREND_WORSENING_THRESHOLD=0.15                        # Score delta threshold to classify as "worsening" trend (default: 0.15)
NLP_TREND_IMPROVING_THRESHOLD=-0.15                       # Score delta threshold to classify as "improving" trend (default: -0.15)
NLP_TREND_VELOCITY_RAPID=0.1                              # Score change per hour threshold for "rapid" velocity (default: 0.1)
NLP_TREND_VELOCITY_GRADUAL=0.03                           # Score change per hour threshold for "gradual" velocity (default: 0.03)
# ------------------------------------------------------- #

# ------------------------------------------------------- #
# INTERVENTION CONFIGURATION
# ------------------------------------------------------- #
NLP_INTERVENTION_ESCALATION_BOOST=true                    # Boost urgency level when escalation detected (default: true)
NLP_INTERVENTION_LATE_NIGHT_BOOST=true                    # Boost urgency level during late night hours (default: true)
# ------------------------------------------------------- #
# ======================================================= #


# ======================================================= #
# ASH-BOT CONFIGURATION
# ======================================================= #
# ------------------------------------------------------- #
# ENVIRONMENT SELECTION
# ------------------------------------------------------- #
BOT_ENVIRONMENT=production                                # Environment: production, testing (default: production)
# Controls which JSON config overrides are loaded
# ------------------------------------------------------- #

# ------------------------------------------------------- #
# LOGGING CONFIGURATION
# Maps to: logging section in default.json
# ------------------------------------------------------- #
BOT_LOG_LEVEL=INFO                                        # Log level: DEBUG, INFO, WARNING, ERROR, CRITICAL (default: INFO)
BOT_LOG_FORMAT=text                                       # Log format: json, text (default: text)
# Use 'text' for development, 'json' for production
BOT_LOG_FILE=/app/logs/ash-bot.log                        # Log file path (default: /app/logs/ash-bot.log)
BOT_LOG_CONSOLE=true                                      # Output logs to console: true, false (default: true)
# ------------------------------------------------------- #
# ======================================================= #

# ======================================================= #
# DISCORD CONFIGURATION
# Maps to: discord, channels sections in default.json
# ======================================================= #
# ------------------------------------------------------- #
# GUILD (SERVER) SETTINGS
# ------------------------------------------------------- #
BOT_DISCORD_GUILD_ID=                                     # Discord guild/server ID (default: null = all guilds)
# Leave empty for multi-guild, or set for single-guild mode
# ------------------------------------------------------- #

# ------------------------------------------------------- #
# CHANNEL SETTINGS
# All channel/role IDs use JSON array format for consistency
# and multi-value support. Get IDs by enabling Developer Mode,
# then right-click channel/role → Copy ID
# ------------------------------------------------------- #
BOT_MONITORED_CHANNELS=[                                  # JSON array of channel IDs to monitor for messages
  "123456789",
  "987654321"
]
BOT_ALERT_CHANNEL_MONITOR_IDS=[                           # Channel ID(s) for MEDIUM severity alerts
  "123456789"
]
BOT_ALERT_CHANNEL_CRISIS_IDS=[                            # Channel ID(s) for HIGH severity alerts
  "123456789"
]
BOT_ALERT_CHANNEL_CRITICAL_IDS=[                          # Channel ID(s) for CRITICAL severity alerts
  "123456789"
]
BOT_WEEKLY_REPORT_CHANNEL_IDS=[                           # Channel ID(s) to post weekly reports
  "123456789"
]
BOT_CRT_NOTES_CHANNEL_IDS=[                               # Channel ID(s) for posting session notes (optional)
  "123456789"
]
# ------------------------------------------------------- #

# ------------------------------------------------------- #
# ROLE SETTINGS
# All role IDs use JSON array format for consistency
# Get role ID: Enable Developer Mode, right-click role, Copy ID
# ------------------------------------------------------- #
BOT_CRT_ROLE_IDS=[                                        # Crisis Response Team role ID(s) for @mentions
  "123456789"
]
# HIGH and CRITICAL alerts ping these roles
BOT_SLASH_COMMANDS_ALLOWED_ROLE_IDS=[                     # Role IDs with CRT-level access
  "123456789",
  "987654321"
]
BOT_SLASH_COMMANDS_ADMIN_ROLE_IDS=[                       # Role IDs with admin-only command access
  "123456789"
]
BOT_HANDOFF_CRT_ROLE_IDS=[                                # Role IDs that trigger handoff
  "123456789",
  "987654321"
]
# ------------------------------------------------------- #
# ======================================================= #

# ======================================================= #
# ASH-NLP API CONFIGURATION
# Maps to: nlp section in default.json
# ======================================================= #
# ------------------------------------------------------- #
# CONNECTION SETTINGS
# ------------------------------------------------------- #
BOT_NLP_BASE_URL=http://ash-nlp:30880                     # Ash-NLP API base URL (default: http://ash-nlp:30880)
# Use Docker container name when running in Docker
BOT_NLP_TIMEOUT=5                                         # API request timeout in seconds (default: 5)
BOT_NLP_RETRIES=2                                         # Number of retry attempts on failure (default: 2)
BOT_NLP_RETRY_DELAY=1                                     # Delay between retries in seconds (default: 1)
# ------------------------------------------------------- #
# ======================================================= #

# ======================================================= #
# REDIS CONFIGURATION
# Maps to: redis section in default.json
# ======================================================= #
# ------------------------------------------------------- #
# CONNECTION SETTINGS
# Note: Redis password should be in secrets/redis_token
# ------------------------------------------------------- #
BOT_REDIS_HOST=ash-redis                                  # Redis host (default: ash-redis)
# Use Docker container name when running in Docker
BOT_REDIS_PORT=6379                                       # Redis port (default: 6379)
BOT_REDIS_DB=0                                            # Redis database number 0-15 (default: 0)
# ------------------------------------------------------- #
# ======================================================= #

# ======================================================= #
# USER HISTORY CONFIGURATION
# Maps to: history section in default.json
# ======================================================= #
# ------------------------------------------------------- #
# STORAGE SETTINGS
# ------------------------------------------------------- #
BOT_HISTORY_TTL_DAYS=14                                   # History retention in days (default: 14, prod: 30)
BOT_HISTORY_MAX_MESSAGES=100                              # Max messages stored per user (default: 100)
BOT_HISTORY_MIN_SEVERITY=low                              # Minimum severity to store: low, medium, high, critical
# NOTE: SAFE/NONE messages are NEVER stored
# ------------------------------------------------------- #
# ======================================================= #

# ======================================================= #
# ALERTING CONFIGURATION
# Maps to: alerting section in default.json
# ======================================================= #
# ------------------------------------------------------- #
# ALERT SETTINGS
# ------------------------------------------------------- #
BOT_ALERTING_ENABLED=true                                 # Enable Discord alerting: true, false (default: true)
BOT_ALERT_MIN_SEVERITY=medium                             # Minimum severity to alert: medium, high, critical (default: medium)
# MEDIUM → monitor channel (no ping)
# HIGH/CRITICAL → crisis channel (with CRT ping)
BOT_ALERT_COOLDOWN=300                                    # Cooldown per user in seconds (default: 300)
# Prevents alert spam from same user
# ------------------------------------------------------- #
# ======================================================= #

# ======================================================= #
# AUTO-INITIATE CONFIGURATION
# Maps to: auto_initiate section in default.json
# ======================================================= #
# ------------------------------------------------------- #
# AUTO-INITIATE SETTINGS
# When CRT doesn't respond to an alert within the delay,
# Ash automatically reaches out to the user in crisis.
# ------------------------------------------------------- #
BOT_AUTO_INITIATE_ENABLED=true                            # Enable auto-initiation feature: true, false (default: true)
BOT_AUTO_INITIATE_DELAY_MINUTES=3                         # Minutes before auto-initiating (default: 3, range: 1-60)
# This is how long to wait for CRT acknowledgment
BOT_AUTO_INITIATE_MIN_SEVERITY=medium                     # Minimum severity: low, medium, high, critical (default: medium)
# Only alerts at or above this level trigger auto-initiate
# ------------------------------------------------------- #
# ======================================================= #

# ======================================================= #
# USER OPT-OUT CONFIGURATION
# Maps to: user_preferences section in default.json
# ======================================================= #
# ------------------------------------------------------- #
# USER OPT-OUT SETTINGS
# Allows users to decline Ash AI interaction while still
# receiving human CRT support. Users react with ❌ to opt out.
# ------------------------------------------------------- #
BOT_USER_OPTOUT_ENABLED=true                              # Enable user opt-out feature: true, false (default: true)
BOT_USER_OPTOUT_TTL_DAYS=30                               # Days until opt-out expires (default: 30, range: 1-365)
# After expiry, user can receive Ash DMs again
# They can re-opt-out if desired
# ------------------------------------------------------- #
# ======================================================= #

# ======================================================= #
# CHANNEL SENSITIVITY CONFIGURATION
# Maps to: channel_sensitivity section in default.json
# ======================================================= #
# ------------------------------------------------------- #
# CHANNEL SENSITIVITY SETTINGS
# Adjusts crisis detection sensitivity per channel.
# Lower values = less sensitive (fewer alerts)
# Higher values = more sensitive (more alerts)
# ------------------------------------------------------- #
BOT_DEFAULT_CHANNEL_SENSITIVITY=1.0                       # Default sensitivity (0.3-2.0, default: 1.0)
#
# Sensitivity Ranges:
#   0.3 - 0.5 : Much less sensitive (Wreck Room, vent channels)
#   0.6 - 0.8 : Somewhat less sensitive (mental health discussion)
#   1.0       : Normal sensitivity (default)
#   1.2 - 1.5 : More sensitive (vulnerable populations)
#   2.0       : Highly sensitive (extreme vigilance)
#
# Per-channel overrides must be configured in default.json
# under channel_sensitivity.channel_overrides:
#   "channel_overrides": {
#     "123456789": 0.5,
#     "987654321": 0.7
#   }
# ------------------------------------------------------- #
# ======================================================= #

# ======================================================= #
# ASH PERSONALITY CONFIGURATION (Claude AI)
# Maps to: ash section in default.json
# ======================================================= #
# ------------------------------------------------------- #
# AI RESPONSE SETTINGS
# Note: Claude API key should be in secrets/claude_api_token
# ------------------------------------------------------- #
BOT_ASH_ENABLED=true                                      # Enable Ash AI responses: true, false (default: true)
BOT_ASH_MIN_SEVERITY=high                                 # Minimum severity for Ash: medium, high, critical (default: high)
# MEDIUM → gentle check-in only
# HIGH/CRITICAL → "Talk to Ash" DM session available
BOT_ASH_SESSION_TIMEOUT=300                               # Session inactivity timeout in seconds (default: 300)
# Session ends after this much idle time
BOT_ASH_MAX_SESSION=600                                   # Maximum session duration in seconds (default: 600)
# Session ends even if active after this time
BOT_ASH_MODEL=claude-sonnet-4-20250514                    # Claude model to use (default: claude-sonnet-4-20250514)
BOT_ASH_MAX_TOKENS=500                                    # Maximum tokens per Ash response (default: 500)
# ------------------------------------------------------- #
# ======================================================= #

# ======================================================= #
# HEALTH CHECK CONFIGURATION
# Maps to: health section in default.json
# ======================================================= #
# ------------------------------------------------------- #
# HEALTH SERVER SETTINGS
# ------------------------------------------------------- #
BOT_HEALTH_ENABLED=true                                   # Enable health check server: true, false (default: true)
BOT_HEALTH_HOST=0.0.0.0                                   # Health server bind address (default: 0.0.0.0)
BOT_HEALTH_PORT=30881                                     # Health server port (default: 30881)
#
# Available Endpoints:
#   GET /health          - Simple liveness probe (always 200 if running)
#   GET /healthz         - Kubernetes liveness alias
#   GET /health/ready    - Readiness probe (200 if Discord connected)
#   GET /readyz          - Kubernetes readiness alias
#   GET /health/detailed - Full component status JSON
#   GET /metrics         - Prometheus-format metrics
# ------------------------------------------------------- #
# ======================================================= #

# ======================================================= #
# METRICS CONFIGURATION
# Maps to: metrics section in default.json
# ======================================================= #
# ------------------------------------------------------- #
# METRICS COLLECTION SETTINGS
# ------------------------------------------------------- #
BOT_METRICS_ENABLED=true                                  # Enable metrics collection: true, false (default: true)
BOT_METRICS_INTERVAL=60                                   # Internal export interval in seconds (default: 60)
# Does not affect /metrics endpoint availability
# ------------------------------------------------------- #
# ======================================================= #

# ======================================================= #
# CIRCUIT BREAKER CONFIGURATION (Phase 5)
# Maps to: circuit_breaker section in default.json
# ======================================================= #
# ------------------------------------------------------- #
# NLP API CIRCUIT BREAKER
# Prevents cascading failures when NLP service is down
# ------------------------------------------------------- #
BOT_CB_NLP_FAILURES=5                                     # Failures before circuit opens (default: 5)
BOT_CB_NLP_SUCCESSES=2                                    # Successes needed to close from half-open (default: 2)
BOT_CB_NLP_TIMEOUT=30                                     # Seconds before trying half-open (default: 30)
#
# Circuit States:
#   CLOSED    → Normal operation, requests pass through
#   OPEN      → Failing fast, returns fallback response (MEDIUM severity)
#   HALF_OPEN → Testing recovery, limited requests allowed
# ------------------------------------------------------- #

# ------------------------------------------------------- #
# REDIS CIRCUIT BREAKER
# Handles Redis connection failures gracefully
# ------------------------------------------------------- #
BOT_CB_REDIS_FAILURES=3                                   # Failures before circuit opens (default: 3)
BOT_CB_REDIS_TIMEOUT=15                                   # Seconds before trying half-open (default: 15)
# Redis failures skip storage but don't block analysis
# ------------------------------------------------------- #
# ======================================================= #

# ======================================================= #
# RESPONSE METRICS CONFIGURATION
# ======================================================= #
# ------------------------------------------------------- #
# RESPONSE TIME TRACKING (Phase 8.1)
# Tracks alert-to-acknowledgment and alert-to-resolution times
# for CRT response effectiveness analysis
# ------------------------------------------------------- #
BOT_RESPONSE_METRICS_ENABLED=true                         # Enable response time tracking: true, false (default: true)
BOT_RESPONSE_METRICS_RETENTION_DAYS=90                    # Days to retain individual alert metrics (1-365, default: 90)
BOT_RESPONSE_METRICS_AGGREGATE_RETENTION_DAYS=365         # Days to retain daily aggregates (30-730, default: 365)
# ------------------------------------------------------- #

# ------------------------------------------------------- #
# WEEKLY CRT REPORT (Phase 8.2)
# Generates and posts automated weekly summary reports
# to a configurable Discord channel
# ------------------------------------------------------- #
BOT_WEEKLY_REPORT_ENABLED=true                            # Enable weekly reports: true, false (default: true)
BOT_WEEKLY_REPORT_DAY=monday                              # Day of week to post: monday-sunday (default: monday)
BOT_WEEKLY_REPORT_HOUR=9                                  # Hour (0-23) in UTC to post report (default: 9)
#
# Report Contents:
#   - Alert Summary (total and by severity)
#   - Response Times (acknowledgment, Ash contact, human response)
#   - Ash Engagement (sessions, auto-initiated, opt-outs)
#   - Busiest Times (peak day and hour)
#   - Top CRT Responders
# ------------------------------------------------------- #

# ------------------------------------------------------- #
# DATA RETENTION POLICY (Phase 8.3)
# Automated cleanup of old data to prevent storage bloat
# Runs daily at configured hour (UTC)
# ------------------------------------------------------- #
BOT_RETENTION_ENABLED=true                                # Enable automated data cleanup: true, false (default: true)
BOT_RETENTION_ALERT_METRICS_DAYS=90                       # Retain individual alert metrics (1-365, default: 90)
BOT_RETENTION_AGGREGATES_DAYS=365                         # Retain daily aggregates (30-730, default: 365)
BOT_RETENTION_MESSAGE_HISTORY_DAYS=7                      # Retain message history (1-30, default: 7)
BOT_RETENTION_SESSION_DATA_DAYS=30                        # Retain session metadata (7-90, default: 30)
BOT_RETENTION_CLEANUP_HOUR=3                              # Hour (0-23) to run daily cleanup in UTC (default: 3)
#
# Data Categories Managed:
#   - Individual alert metrics (response times, acknowledgments)
#   - Daily aggregate statistics
#   - User message history (for context analysis)
#   - Ash session metadata
#   - User opt-out preferences
# ------------------------------------------------------- #
# ======================================================= #

# ======================================================= #
# CRT WORKFLOW ENHANCEMENTS
# ======================================================= #
# ------------------------------------------------------- #
# SLASH COMMANDS CONFIGURATION
# ------------------------------------------------------- #
BOT_SLASH_COMMANDS_ENABLED=true                           # Enable slash commands: true, false (default: true)
#
# Available Commands:
#   /ash status              - Show bot health and connection status (CRT)
#   /ash stats [days]        - Show crisis statistics for period (CRT)
#   /ash history @user       - Show user's crisis alert history (CRT)
#   /ash config              - Show bot configuration (Admin only)
#   /ash notes <id> <text>   - Add note to a crisis session (CRT)
#   /ash optout @user [clear]- Check/manage user opt-out status (CRT)
# ------------------------------------------------------- #

# ------------------------------------------------------- #
# SESSION HANDOFF CONFIGURATION
# Enables CRT staff to smoothly take over Ash sessions
# with context summaries and session documentation.
# ------------------------------------------------------- #
BOT_HANDOFF_ENABLED=true                                  # Enable CRT handoff detection: true, false (default: true)
BOT_HANDOFF_CONTEXT_ENABLED=true                          # Show context summary to CRT: true, false (default: true)
#
# How it works:
#   1. CRT member joins an active Ash DM session
#   2. Ash announces handoff to user: "A member of CRT has joined..."
#   3. Ash sends context summary to CRT (topics, duration, mood)
#   4. Session is marked as transferred for documentation
#
# Notes Channel:
#   If configured, session summaries are posted when sessions end.
#   Summaries include: duration, severity, AI summary, CRT notes.
# ------------------------------------------------------- #

# ------------------------------------------------------- #
# FOLLOW-UP CHECK-IN CONFIGURATION
# Automated follow-up DMs after Ash sessions complete.
# Shows users that Ash cares about their ongoing wellbeing.
# ------------------------------------------------------- #
BOT_FOLLOWUP_ENABLED=true                                 # Enable follow-up check-ins: true, false (default: true)
BOT_FOLLOWUP_DELAY_HOURS=24                               # Hours after session to check in (1-48, default: 24)
BOT_FOLLOWUP_MAX_HOURS=48                                 # Maximum hours to send follow-up (24-72, default: 48)
BOT_FOLLOWUP_MIN_SEVERITY=medium                          # Minimum severity: low, medium, high, critical (default: medium)
BOT_FOLLOWUP_MIN_SESSION_MINUTES=5                        # Minimum session length to follow up (1-30, default: 5)
#
# How it works:
#   1. Ash session completes (naturally or via CRT handoff)
#   2. If eligible, follow-up is scheduled for delay_hours later
#   3. At scheduled time, Ash sends a caring check-in DM
#   4. If user responds, a brief mini-session begins
#
# Eligibility Conditions:
#   - User has NOT opted out of Ash interaction
#   - Session severity >= min_severity
#   - Session lasted >= min_session_minutes
#   - User hasn't had a follow-up in last 24 hours
#   - Follow-up is within max_hours of session end
#
# PRIVACY NOTE:
#   Users who opt out of Ash NEVER receive follow-ups.
#   This respects user autonomy and choice.
# ------------------------------------------------------- #
# ======================================================= #


# ======================================================= #
# ⚠️  SECRETS REMINDER
# ======================================================= #
# Do NOT put secrets in this file! Use Docker Secrets:
#
# Required:
#   secrets/discord_bot_token    - Discord bot token (from Developer Portal)
#   secrets/claude_api_token     - Claude API key (from Anthropic Console)
#
# Optional:
#   secrets/discord_alert_token  - Discord webhook URL for system alerts
#   secrets/redis_token          - Redis password (if authentication enabled)
#
# Example:
#   echo "your-secret-token" > secrets/discord_bot_token
#   chmod 600 secrets/discord_bot_token
#
# See secrets/README.md for full instructions
# ======================================================= #


# ======================================================= #
# END OF CONFIGURATION
# ======================================================= #
